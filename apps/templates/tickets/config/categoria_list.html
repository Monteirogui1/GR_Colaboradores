{% extends "layouts/base.html" %}
{% block title %}Categorias{% endblock %}
{% block conteudo %}
<div class="content">
    <div class="page-header">
        <h1><i class="bi bi-bookmarks"></i> Categorias</h1>
        <a href="{% url 'tickets:categoria_create' %}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Nova Categoria</a>
    </div>
    <div class="detail-card">
        <h2>Lista de Categorias</h2>
        <div class="detail-content" style="padding: 0;">
            {% if categorias %}
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr><th>Nome</th><th>Descrição</th><th>Disponível para</th><th>Status</th><th>Ações</th></tr>
                        </thead>
                        <tbody>
                            {% for obj in categorias %}
                            <tr>
                                <td><strong>{{ obj.nome }}</strong></td>
                                <td>{{ obj.descricao|truncatewords:10|default:"-" }}</td>
                                <td>{{ obj.get_disponivel_para_display }}</td>
                                <td>
                                    <span class="badge" style="background-color: {% if obj.ativo %}#28a745{% else %}#6c757d{% endif %}; color: white; padding: 5px 10px;">
                                        {% if obj.ativo %}Ativo{% else %}Inativo{% endif %}
                                    </span>
                                </td>
                                <td>
                                    <a href="{% url 'tickets:categoria_update' obj.pk %}" class="btn btn-sm btn-edit" title="Editar"><i class="bi bi-pencil"></i></a>
                                    <form method="post" action="{% url 'tickets:categoria_delete' obj.pk %}" style="display: inline;" onsubmit="return confirm('Tem certeza?');">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-sm btn-delete" title="Excluir"><i class="bi bi-trash"></i></button>
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div style="text-align: center; padding: 60px;">
                    <p>Nenhuma categoria cadastrada</p>
                    <a href="{% url 'tickets:categoria_create' %}" class="btn btn-primary">Criar Primeira Categoria</a>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}